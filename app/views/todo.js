define(function(e,t,n){var r=e("backbone");return this._=e("underscore"),TodoView=r.View.extend({tagName:"li",template:_.template($("#item-template").html()),events:{"dblclick label":"edit","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.model.on("change",this.render,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.input=this.$(".edit"),this},edit:function(){this.$el.addClass("editing"),this.input.focus()},close:function(){var e=this.input.val().trim();e&&this.model.save({title:e}),this.$el.removeClass("editing")},updateOnEnter:function(e){e.which===ENTER_KEY&&this.close()}}),TodoView});